(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"./packages/pull-to-refresh/examples/index.mdx":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/docz-core/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),o=n("react"),a=n("./node_modules/@mdx-js/react/dist/index.es.js"),s=n("./node_modules/docz-core/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),c=(n("./packages/pull-to-refresh/src/index.less"),n("./node_modules/docz-core/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread.js")),i=n("./node_modules/docz-core/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),l=n("./node_modules/docz-core/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js"),d=n("./node_modules/docz-core/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js"),u=n("./node_modules/docz-core/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js"),p=n("./node_modules/docz-core/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),f=n("./node_modules/docz-core/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js"),m=n("./node_modules/classnames/index.js"),b=n.n(m),h=function(e){function t(){return Object(i.a)(this,t),Object(d.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(l.a)(t,[{key:"shouldComponentUpdate",value:function(e){return e.shouldUpdate}},{key:"render",value:function(){return o.createElement("div",null,this.props.render())}}]),t}(o.Component);"undefined"!==typeof h&&h&&h===Object(h)&&Object.isExtensible(h)&&Object.defineProperty(h,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"StaticRenderer",filename:"packages/pull-to-refresh/src/StaticRenderer.tsx"}}),"undefined"!==typeof h&&h&&h===Object(h)&&Object.isExtensible(h)&&Object.defineProperty(h,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"StaticRenderer",filename:"packages/pull-to-refresh/src/StaticRenderer.tsx"}});var g="undefined"!==typeof navigator&&/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent),v="down",_="up",j={activate:"release",deactivate:"pull",release:"loading",finish:"finish"},S=!1;try{var O=Object.defineProperty({},"passive",{get:function(){S=!0}});window.addEventListener("test",null,O)}catch(z){}var y=!!S&&{passive:!1},E=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={currSt:"deactivate",dragOnEdge:!1},n.containerRef=void 0,n.contentRef=void 0,n._to=void 0,n._ScreenY=void 0,n._startScreenY=void 0,n._lastScreenY=void 0,n._timer=void 0,n._isMounted=!1,n.shouldUpdateChildren=!1,n.triggerPullToRefresh=function(){!n.state.dragOnEdge&&n._isMounted&&(n.props.refreshing?(n.props.direction===_&&(n._lastScreenY=-n.props.distanceToRefresh-1),n.props.direction===v&&(n._lastScreenY=n.props.distanceToRefresh+1),n.setState({currSt:"release"},function(){return n.setContentStyle(n._lastScreenY)})):n.setState({currSt:"finish"},function(){return n.reset()}))},n.init=function(e){e&&(n._to={touchstart:n.onTouchStart.bind(Object(p.a)(n),e),touchmove:n.onTouchMove.bind(Object(p.a)(n),e),touchend:n.onTouchEnd.bind(Object(p.a)(n),e),touchcancel:n.onTouchEnd.bind(Object(p.a)(n),e)},Object.keys(n._to).forEach(function(t){e.addEventListener(t,n._to[t],y)}))},n.destroy=function(e){n._to&&e&&Object.keys(n._to).forEach(function(t){e.removeEventListener(t,n._to[t])})},n.onTouchStart=function(e,t){n._ScreenY=n._startScreenY=t.touches[0].screenY,n._lastScreenY=n._lastScreenY||0},n.isEdge=function(e,t){var r=n.props.getScrollContainer();if(r&&r===document.body){var o=document.scrollingElement?document.scrollingElement:document.body;if(t===_)return o.scrollHeight-o.scrollTop<=window.innerHeight;if(t===v)return o.scrollTop<=0}return t===_?e.scrollHeight-e.scrollTop===e.clientHeight:t===v?e.scrollTop<=0:void 0},n.damping=function(e){return Math.abs(n._lastScreenY)>n.props.damping?0:e*=.6*(1-Math.abs(n._ScreenY-n._startScreenY)/window.screen.height)},n.onTouchMove=function(e,t){var r=t.touches[0].screenY,o=n.props.direction;if(!(o===_&&n._startScreenY<r||o===v&&n._startScreenY>r)&&n.isEdge(e,o)){n.state.dragOnEdge||(n._ScreenY=n._startScreenY=t.touches[0].screenY,n.setState({dragOnEdge:!0})),t.preventDefault();var a=Math.round(r-n._ScreenY);n._ScreenY=r,n._lastScreenY+=n.damping(a),n.setContentStyle(n._lastScreenY),Math.abs(n._lastScreenY)<n.props.distanceToRefresh?"deactivate"!==n.state.currSt&&n.setState({currSt:"deactivate"}):"deactivate"===n.state.currSt&&n.setState({currSt:"activate"}),g&&t.changedTouches[0].clientY<0&&n.onTouchEnd()}},n.onTouchEnd=function(){n.state.dragOnEdge&&n.setState({dragOnEdge:!1}),"activate"===n.state.currSt?(n.setState({currSt:"release"}),n._timer=setTimeout(function(){n.props.refreshing||n.setState({currSt:"finish"},function(){return n.reset()}),n._timer=void 0},1e3),n.props.onRefresh()):n.reset()},n.reset=function(){n._lastScreenY=0,n.setContentStyle(0)},n.setContentStyle=function(e){var t,r;n.contentRef&&(t=n.contentRef.style,r="translate3d(0px,".concat(e,"px,0)"),t.transform=r,t.webkitTransform=r,t.MozTransform=r)},n}return Object(f.a)(t,e),Object(l.a)(t,[{key:"shouldComponentUpdate",value:function(e){return this.shouldUpdateChildren=this.props.children!==e.children,!0}},{key:"componentDidUpdate",value:function(e){e!==this.props&&e.refreshing!==this.props.refreshing&&this.triggerPullToRefresh()}},{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){e.init(e.props.getScrollContainer()||e.containerRef),e.triggerPullToRefresh(),e._isMounted=!0})}},{key:"componentWillUnmount",value:function(){this.destroy(this.props.getScrollContainer()||this.containerRef)}},{key:"render",value:function(){var e=this,t=Object(c.a)({},this.props);delete t.damping;var n=t.className,a=t.prefixCls,s=t.children,i=t.getScrollContainer,l=t.direction,d=(t.onRefresh,t.refreshing,t.indicator),u=(t.distanceToRefresh,Object(r.a)(t,["className","prefixCls","children","getScrollContainer","direction","onRefresh","refreshing","indicator","distanceToRefresh"])),p=o.createElement(h,{shouldUpdate:this.shouldUpdateChildren,render:function(){return s}}),f=function(t){var n=b()(t,!e.state.dragOnEdge&&"".concat(a,"-transition"));return o.createElement("div",{className:"".concat(a,"-content-wrapper")},o.createElement("div",{className:n,ref:function(t){return e.contentRef=t}},l===_?p:null,o.createElement("div",{className:"".concat(a,"-indicator")},d[e.state.currSt]||j[e.state.currSt]),l===v?p:null))};return i()?f("".concat(a,"-content ").concat(a,"-").concat(l)):o.createElement("div",Object.assign({ref:function(t){return e.containerRef=t},className:b()(n,a,"".concat(a,"-").concat(l))},u),f("".concat(a,"-content")))}}]),t}(o.Component);E.defaultProps={prefixCls:"rmc-pull-to-refresh",getScrollContainer:function(){},direction:v,distanceToRefresh:25,damping:100,indicator:j},"undefined"!==typeof E&&E&&E===Object(E)&&Object.isExtensible(E)&&Object.defineProperty(E,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"PullToRefresh",filename:"packages/pull-to-refresh/src/PullToRefresh.tsx"}}),"undefined"!==typeof E&&E&&E===Object(E)&&Object.isExtensible(E)&&Object.defineProperty(E,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"PullToRefresh",filename:"packages/pull-to-refresh/src/PullToRefresh.tsx"}});var x=E;"undefined"!==typeof E&&E&&E===Object(E)&&Object.isExtensible(E)&&Object.defineProperty(E,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"PullToRefresh",filename:"packages/pull-to-refresh/src/index.ts"}});var T=function(e){var t=o.useState(!1),n=Object(s.a)(t,2),r=n[0],a=n[1],c=o.useState(!1),i=Object(s.a)(c,2),l=i[0],d=i[1];return o.createElement("div",null,o.createElement("button",{style:{display:"inline-block",marginBottom:30,border:1},onClick:function(){return d(!l)}},"switchContainer: ",l?"true":"false"),o.createElement(x,Object.assign({key:String(l),style:{height:200,overflow:"auto",border:"1px solid #ccc"}},l?{getScrollContainer:function(){return document.body}}:{},{className:"forTest",direction:"down",refreshing:r,onRefresh:function(){a(!0),setTimeout(function(){a(!1)},1e3)},indicator:{deactivate:"\u4e0b\u62c9"},damping:150}),[1,2,3,4,5,6,7].map(function(e){return o.createElement("div",{key:e,style:{textAlign:"center",padding:20},onClick:function(){return alert(1)}},"item ",e)})),o.createElement("div",{dangerouslySetInnerHTML:{__html:navigator.userAgent.match(/Android|iPhone|iPad|iPod/i)?"<style>#qrcode, .highlight{ display: none }</style>":""}}))},R=T;T&&T===Object(T)&&Object.isExtensible(T)&&Object.defineProperty(T,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"Example1",filename:"packages/pull-to-refresh/examples/Example1.tsx"}});var C=function(e){var t=o.useRef(null),n=o.useState()[1];o.useLayoutEffect(function(){e.pullToRefresh&&n(null)},[]);var r=e.children;return e.pullToRefresh&&(r=o.cloneElement(e.pullToRefresh,{getScrollContainer:function(){return t.current}},r)),o.createElement("div",{ref:t.current,style:{height:200,border:1,overflow:"auto"}},r)},k=function(e){var t=o.useState(!1),n=Object(s.a)(t,2),r=n[0],a=n[1];return o.useEffect(function(){document.body.style.overflowY=navigator.userAgent.match(/Android|iPhone|iPad|iPod/i)?"hidden":"auto"},[]),o.createElement(C,{pullToRefresh:o.createElement(x,{className:"forTest",direction:"up",refreshing:r,onRefresh:function(){a(!0),setTimeout(function(){a(!1)},1e3)}})},[1,2,3,4,5,6,7].map(function(e){return o.createElement("div",{key:e,style:{textAlign:"center",padding:20}},"item ",e)}))},P=k;k&&k===Object(k)&&Object.isExtensible(k)&&Object.defineProperty(k,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"Example2",filename:"packages/pull-to-refresh/examples/Example2.tsx"}}),n.d(t,"default",function(){return M});var Y={},w="wrapper";function M(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(a.b)(w,Object.assign({},Y,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("h3",{id:"example1"},"Example1"),Object(a.b)(R,{mdxType:"Example1"}),Object(a.b)("h3",{id:"example2"},"Example2"),Object(a.b)(P,{mdxType:"Example2"}))}M&&M===Object(M)&&Object.isExtensible(M)&&Object.defineProperty(M,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"MDXContent",filename:"packages/pull-to-refresh/examples/index.mdx"}}),M.isMDXComponent=!0},"./packages/pull-to-refresh/src/index.less":function(e,t,n){}}]);